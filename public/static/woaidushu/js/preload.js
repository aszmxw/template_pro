(function(){this.bwLoader=function(){var a=new Array();var b=new Array();this.addProgressListener=function(c){b.push({callback:c})};this.addCompletionListener=function(c){b.push({callback:function(d){if(d.completedCount===d.totalCount){c(d)}}})};this.addResources=function(d,c){a.push({url:d,type:c||"images"})};this.start=function(){var d=0,e;(function c(){switch(a[d].type){case"images":e=new Image();e.onload=function(){e.onload=null;d++;for(var g=0;g<b.length;g++){b[g].callback({completedCount:d,totalCount:a.length})}if(d<a.length){c(d)}};e.src=a[d].url;break;case"music":e=new Audio(a[d].url);e.onloadedmetadata=function(){e.onloadedmetadata=null;d++;for(var g=0;g<b.length;g++){b[g].callback({completedCount:d,totalCount:a.length})}if(d<a.length){c(d)}};e.src=a[d].url;break;default:d++;for(var f=0;f<b.length;f++){b[f].callback({completedCount:d,totalCount:a.length})}if(d<a.length){c(d)}break}})()}}}());